â
aC:\Users\gibre\Projects\Pebolim\Pebolim-Backend\Pebolim.Data\Configurations\MySqlConfiguration.cs
	namespace 	
Pebolim
 
. 
Data 
. 
Configurations %
{ 
public 

class 
MySqlConfiguration #
{ 
public 
string 
? 
WebApiDatabase %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
} ô
TC:\Users\gibre\Projects\Pebolim\Pebolim-Backend\Pebolim.Data\Context\MySqlContext.cs
	namespace 	
Pebolim
 
. 
Data 
. 
Context 
{ 
public		 

class		 
MySqlContext		 
:		 
	DbContext		  )
{

 
private 
readonly 
MySqlConfiguration +
_configuration, :
;: ;
public 
MySqlContext 
( 
IOptions 
< 
MySqlConfiguration '
>' (
configuration) 6
,6 7
DbContextOptions 
< 
MySqlContext )
>) *
options+ 2
)2 3
:4 5
base6 :
(: ;
options; B
)B C
{ 	
_configuration 
= 
configuration *
.* +
Value+ 0
;0 1
} 	
public 
DbSet 
< 
User 
> 
? 
Users !
{" #
get$ '
;' (
set) ,
;, -
}. /
	protected 
override 
void 
OnConfiguring  -
(- .#
DbContextOptionsBuilder. E
optionsBuilderF T
)T U
{ 	
string 
connectionString #
=$ %
_configuration& 4
.4 5
WebApiDatabase5 C
??D F
$str	G ä
;
ä ã
optionsBuilder 
. 
UseMySql #
(# $
connectionString$ 4
,4 5
ServerVersion 
. 

AutoDetect (
(( )
connectionString) 9
)9 :
,: ;
opt< ?
=>@ B
{ 
opt 
. 
CommandTimeout "
(" #
$num# &
)& '
;' (
} 
) 
; 
} 	
	protected!! 
override!! 
void!! 
OnModelCreating!!  /
(!!/ 0
ModelBuilder!!0 <
modelBuilder!!= I
)!!I J
{"" 	
base## 
.## 
OnModelCreating##  
(##  !
modelBuilder##! -
)##- .
;##. /
modelBuilder%% 
.%% 
Entity%% 
<%%  
User%%  $
>%%$ %
(%%% &
new%%& )
UserMap%%* 1
(%%1 2
)%%2 3
.%%3 4
	Configure%%4 =
)%%= >
;%%> ?
}&& 	
}'' 
}(( õ
OC:\Users\gibre\Projects\Pebolim\Pebolim-Backend\Pebolim.Data\Mapping\UserMap.cs
	namespace 	
Pebolim
 
. 
Data 
. 
Mapping 
{ 
public 

class 
UserMap 
: $
IEntityTypeConfiguration 3
<3 4
User4 8
>8 9
{ 
public		 
void		 
	Configure		 
(		 
EntityTypeBuilder		 /
<		/ 0
User		0 4
>		4 5
builder		6 =
)		= >
{

 	
builder 
. 
ToTable 
( 
$str "
)" #
;# $
builder 
. 
HasKey 
( 
u 
=> 
u  !
.! "
Id" $
)$ %
;% &
builder 
. 
Property 
( 
u 
=> !
u" #
.# $
Username$ ,
), -
. 
HasConversion 
( 
u  
=>! #
u$ %
.% &
ToString& .
(. /
)/ 0
,0 1
u2 3
=>4 6
u7 8
)8 9
. 

IsRequired 
( 
) 
. 
HasColumnName 
( 
$str )
)) *
. 
HasColumnType 
( 
$str -
)- .
;. /
builder 
. 
Property 
( 
u 
=> !
u" #
.# $
PasswordHash$ 0
)0 1
. 
HasConversion 
( 
u  
=>! #
u$ %
.% &
ToString& .
(. /
)/ 0
,0 1
u2 3
=>4 6
u7 8
)8 9
. 

IsRequired 
( 
) 
. 
HasColumnName 
( 
$str -
)- .
. 
HasColumnType 
( 
$str )
)) *
;* +
builder 
. 
Property 
( 
u 
=> !
u" #
.# $
Salt$ (
)( )
. 
HasConversion 
( 
u  
=>! #
u$ %
.% &
ToString& .
(. /
)/ 0
,0 1
u2 3
=>4 6
u7 8
)8 9
. 

IsRequired 
( 
) 
. 
HasColumnName 
( 
$str %
)% &
. 
HasColumnType 
( 
$str )
)) *
;* +
}   	
}!! 
}"" ˚
gC:\Users\gibre\Projects\Pebolim\Pebolim-Backend\Pebolim.Data\Migrations\20220707161450_Migration.000.cs
	namespace 	
Pebolim
 
. 
Data 
. 

Migrations !
{ 
public 

partial 
class 
Migration000 %
:& '
	Migration( 1
{		 
	protected

 
override

 
void

 
Up

  "
(

" #
MigrationBuilder

# 3
migrationBuilder

4 D
)

D E
{ 	
migrationBuilder 
. 
AlterDatabase *
(* +
)+ ,
. 

Annotation 
( 
$str +
,+ ,
$str- 6
)6 7
;7 8
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ C
,C D(
MySqlValueGenerationStrategyE a
.a b
IdentityColumnb p
)p q
,q r
Username 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: H
,H I
nullableJ R
:R S
falseT Y
)Y Z
. 

Annotation #
(# $
$str$ 3
,3 4
$str5 >
)> ?
,? @
PasswordHash  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
$str> H
,H I
nullableJ R
:R S
falseT Y
)Y Z
. 

Annotation #
(# $
$str$ 3
,3 4
$str5 >
)> ?
,? @
Salt 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 @
,@ A
nullableB J
:J K
falseL Q
)Q R
. 

Annotation #
(# $
$str$ 3
,3 4
$str5 >
)> ?
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% .
,. /
x0 1
=>2 4
x5 6
.6 7
Id7 9
)9 :
;: ;
} 
) 
.   

Annotation   
(   
$str   +
,  + ,
$str  - 6
)  6 7
;  7 8
}!! 	
	protected## 
override## 
void## 
Down##  $
(##$ %
MigrationBuilder##% 5
migrationBuilder##6 F
)##F G
{$$ 	
migrationBuilder%% 
.%% 
	DropTable%% &
(%%& '
name&& 
:&& 
$str&& 
)&& 
;&& 
}'' 	
}(( 
})) è0
[C:\Users\gibre\Projects\Pebolim\Pebolim-Backend\Pebolim.Data\Repositories\BaseRepository.cs
	namespace 	
Pebolim
 
. 
Data 
. 
Repositories #
{ 
public 

class 
BaseRepository 
<  
TEntity  '
>' (
:) *
IBaseRepository+ :
<: ;
TEntity; B
>B C
whereD I
TEntityJ Q
:R S

BaseEntityT ^
{		 
	protected

 
readonly

 
MySqlContext

 '
_mySqlContext

( 5
;

5 6
public 
BaseRepository 
( 
MySqlContext *
mySqlContext+ 7
)7 8
{ 	
_mySqlContext 
= 
mySqlContext (
;( )
} 	
public 
virtual 
async 
Task !
<! "
bool" &
>& '
Insert( .
(. /
TEntity/ 6
obj7 :
): ;
{ 	
try 
{ 
await 
_mySqlContext #
.# $
Set$ '
<' (
TEntity( /
>/ 0
(0 1
)1 2
.2 3
AddAsync3 ;
(; <
obj< ?
)? @
;@ A
_mySqlContext 
. 
SaveChanges )
() *
)* +
;+ ,
} 
catch 
( 
	Exception 
ex 
)  
{ 
Console 
. 
	WriteLine !
(! "
ex" $
.$ %
ToString% -
(- .
). /
)/ 0
;0 1
return 
false 
; 
} 
return 
true 
; 
} 	
public!! 
virtual!! 
async!! 
Task!! !
<!!! "
IList!!" '
<!!' (
TEntity!!( /
>!!/ 0
>!!0 1
Select!!2 8
(!!8 9
)!!9 :
{"" 	
var## 
entities## 
=## 
await##  
_mySqlContext##! .
.##. /
Set##/ 2
<##2 3
TEntity##3 :
>##: ;
(##; <
)##< =
.##= >
ToListAsync##> I
(##I J
)##J K
;##K L
return$$ 
entities$$ 
;$$ 
}%% 	
public'' 
virtual'' 
async'' 
Task'' !
<''! "
TEntity''" )
?'') *
>''* +
Select'', 2
(''2 3
int''3 6
id''7 9
)''9 :
{(( 	
try)) 
{** 
var++ 
entity++ 
=++ 
await++ #
_mySqlContext++$ 1
.++1 2
Set++2 5
<++5 6
TEntity++6 =
>++= >
(++> ?
)++? @
.++@ A 
SingleOrDefaultAsync++A U
(++U V
x++V W
=>++X Z
x++[ \
.++\ ]
Id++] _
==++` b
id++c e
)++e f
;++f g
return,, 
entity,, 
;,, 
}-- 
catch.. 
(.. 
	Exception.. 
ex.. 
)..  
{// 
Console00 
.00 
	WriteLine00 !
(00! "
ex00" $
.00$ %
ToString00% -
(00- .
)00. /
)00/ 0
;000 1
return11 
null11 
;11 
}22 
}33 	
public55 
virtual55 
async55 
Task55 !
<55! "
bool55" &
>55& '
Update55( .
(55. /
TEntity55/ 6
obj557 :
)55: ;
{66 	
try77 
{88 
_mySqlContext99 
.99 
Entry99 #
(99# $
obj99$ '
)99' (
.99( )
State99) .
=99/ 0
EntityState991 <
.99< =
Modified99= E
;99E F
await:: 
_mySqlContext:: #
.::# $
SaveChangesAsync::$ 4
(::4 5
)::5 6
;::6 7
};; 
catch<< 
(<< 
	Exception<< 
ex<< 
)<<  
{== 
Console>> 
.>> 
	WriteLine>> !
(>>! "
ex>>" $
.>>$ %
ToString>>% -
(>>- .
)>>. /
)>>/ 0
;>>0 1
return?? 
false?? 
;?? 
}@@ 
returnBB 
trueBB 
;BB 
}CC 	
publicEE 
virtualEE 
asyncEE 
TaskEE !
<EE! "
boolEE" &
>EE& '
DeleteEE( .
(EE. /
intEE/ 2
idEE3 5
)EE5 6
{FF 	
tryGG 
{HH 
varII 
entityII 
=II 
awaitII "
SelectII# )
(II) *
idII* ,
)II, -
;II- .
ifKK 
(KK 
entityKK 
==KK 
nullKK "
)KK" #
returnLL 
falseLL  
;LL  !
_mySqlContextNN 
.NN 
SetNN !
<NN! "
TEntityNN" )
>NN) *
(NN* +
)NN+ ,
.NN, -
RemoveNN- 3
(NN3 4
entityNN4 :
)NN: ;
;NN; <
_mySqlContextOO 
.OO 
SaveChangesOO )
(OO) *
)OO* +
;OO+ ,
}PP 
catchQQ 
(QQ 
	ExceptionQQ 
exQQ 
)QQ  
{RR 
ConsoleSS 
.SS 
	WriteLineSS !
(SS! "
exSS" $
.SS$ %
ToStringSS% -
(SS- .
)SS. /
)SS/ 0
;SS0 1
returnTT 
falseTT 
;TT 
}UU 
returnWW 
trueWW 
;WW 
}XX 	
}YY 
}ZZ Ã
[C:\Users\gibre\Projects\Pebolim\Pebolim-Backend\Pebolim.Data\Repositories\UserRepository.cs
	namespace 	
Pebolim
 
. 
Data 
. 
Repositories #
{ 
public 

class 
UserRepository 
:  !
BaseRepository" 0
<0 1
User1 5
>5 6
,6 7
IUserRepository8 G
{ 
public		 
UserRepository		 
(		 
MySqlContext		 *
mySqlContext		+ 7
)		7 8
:		9 :
base		; ?
(		? @
mySqlContext		@ L
)		L M
{

 	
} 	
} 
} 