ﬁ
\C:\Users\gibre\Projects\Pebolim\Pebolim-Backend\Pebolim.API\Configurations\UserMapProfile.cs
	namespace 	
Pebolim
 
. 
API 
. 
Configurations $
{ 
public 

class 
UserMapProfile 
:  !
Profile" )
{ 
public 
UserMapProfile 
( 
) 
{		 	
} 	
} 
} ºN
YC:\Users\gibre\Projects\Pebolim\Pebolim-Backend\Pebolim.API\Controllers\UserController.cs
	namespace 	
Pebolim
 
. 
API 
. 
Controllers !
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
UserController 
:  !
ControllerBase" 0
{ 
private 
readonly 
IUserService %
_userService& 2
;2 3
public 
UserController 
( 
IUserService 
userService $
)$ %
{ 	
_userService 
= 
userService &
;& '
} 	
[,, 	
HttpPut,,	 
(,, 
$str,, 
),, 
],, 
[-- 	 
ProducesResponseType--	 
(-- 
StatusCodes-- )
.--) *
Status200OK--* 5
,--5 6
Type--7 ;
=--< =
typeof--> D
(--D E
GetUserModel--E Q
)--Q R
)--R S
]--S T
[.. 	 
ProducesResponseType..	 
(.. 
StatusCodes.. )
...) *
Status400BadRequest..* =
)..= >
]..> ?
[// 	 
ProducesResponseType//	 
(// 
StatusCodes// )
.//) *
Status409Conflict//* ;
)//; <
]//< =
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
Create00) /
(00/ 0
[000 1
FromBody001 9
]009 :
CreateUserModel00; J
newUser00K R
)00R S
{11 	
if22 
(22 
newUser22 
==22 
null22 
)22  
return33 

BadRequest33 !
(33! "
$str33" M
)33M N
;33N O
var55 
createdUser55 
=55 
await66 
_userService66 "
.66" #
Add66# &
<66& '
CreateUserModel66' 6
,666 7
GetUserModel668 D
,66D E
UserValidator66F S
>66S T
(66T U
newUser66U \
)66\ ]
;66] ^
if88 
(88 
createdUser88 
!=88 
null88 #
)88# $
{99 
return:: 
Ok:: 
(:: 
createdUser:: %
)::% &
;::& '
};; 
return== 
Conflict== 
(== 
$str== P
)==P Q
;==Q R
}>> 	
[DD 	
HttpGetDD	 
(DD 
$strDD 
)DD 
]DD 
[EE 	 
ProducesResponseTypeEE	 
(EE 
StatusCodesEE )
.EE) *
Status200OKEE* 5
,EE5 6
TypeEE7 ;
=EE< =
typeofEE> D
(EED E
ListEEE I
<EEI J
GetUserModelEEJ V
>EEV W
)EEW X
)EEX Y
]EEY Z
[FF 	 
ProducesResponseTypeFF	 
(FF 
StatusCodesFF )
.FF) *
Status404NotFoundFF* ;
)FF; <
]FF< =
publicGG 
asyncGG 
TaskGG 
<GG 
IActionResultGG '
>GG' (
GetGG) ,
(GG, -
)GG- .
{HH 	
varII 
usersII 
=II 
awaitII 
_userServiceII *
.II* +
GetAllII+ 1
<II1 2
GetUserModelII2 >
>II> ?
(II? @
)II@ A
;IIA B
ifKK 
(KK 
usersKK 
.KK 
AnyKK 
(KK 
)KK 
)KK 
{LL 
returnMM 
OkMM 
(MM 
usersMM 
)MM  
;MM  !
}NN 
returnPP 
NotFoundPP 
(PP 
)PP 
;PP 
}QQ 	
[XX 	
HttpGetXX	 
(XX 
$strXX 
)XX 
]XX  
[YY 	 
ProducesResponseTypeYY	 
(YY 
StatusCodesYY )
.YY) *
Status200OKYY* 5
,YY5 6
TypeYY7 ;
=YY< =
typeofYY> D
(YYD E
GetUserModelYYE Q
)YYQ R
)YYR S
]YYS T
[ZZ 	 
ProducesResponseTypeZZ	 
(ZZ 
StatusCodesZZ )
.ZZ) *
Status400BadRequestZZ* =
)ZZ= >
]ZZ> ?
[[[ 	 
ProducesResponseType[[	 
([[ 
StatusCodes[[ )
.[[) *
Status404NotFound[[* ;
)[[; <
][[< =
public\\ 
async\\ 
Task\\ 
<\\ 
IActionResult\\ '
>\\' (
Get\\) ,
(\\, -
int\\- 0
id\\1 3
)\\3 4
{]] 	
if^^ 
(^^ 
id^^ 
<=^^ 
$num^^ 
)^^ 
return__ 

BadRequest__ !
(__! "
$"__" $
$str__$ 5
{__5 6
id__6 8
}__8 9
$str__9 ;
"__; <
)__< =
;__= >
varaa 
useraa 
=aa 
awaitaa 
_userServiceaa )
.aa) *
GetByIdaa* 1
<aa1 2
GetUserModelaa2 >
>aa> ?
(aa? @
idaa@ B
)aaB C
;aaC D
ifcc 
(cc 
usercc 
!=cc 
nullcc 
)cc 
{dd 
returnee 
Okee 
(ee 
useree 
)ee 
;ee  
}ff 
returnhh 
NotFoundhh 
(hh 
$"hh 
$strhh ;
{hh; <
idhh< >
}hh> ?
$strhh? A
"hhA B
)hhB C
;hhC D
}ii 	
[{{ 	
	HttpPatch{{	 
({{ 
$str{{ 
){{  
]{{  !
[|| 	 
ProducesResponseType||	 
(|| 
StatusCodes|| )
.||) *
Status200OK||* 5
,||5 6
Type||7 ;
=||< =
typeof||> D
(||D E
GetUserModel||E Q
)||Q R
)||R S
]||S T
[}} 	 
ProducesResponseType}}	 
(}} 
StatusCodes}} )
.}}) *
Status404NotFound}}* ;
)}}; <
]}}< =
[~~ 	 
ProducesResponseType~~	 
(~~ 
StatusCodes~~ )
.~~) *
Status409Conflict~~* ;
)~~; <
]~~< =
public 
async 
Task 
< 
IActionResult '
>' (
Update) /
(/ 0
[0 1
FromBody1 9
]9 :
UpdateUserModel; J
userToUpdateK W
)W X
{
ÄÄ 	
if
ÅÅ 
(
ÅÅ 
userToUpdate
ÅÅ 
==
ÅÅ 
null
ÅÅ  $
)
ÅÅ$ %
return
ÇÇ 

BadRequest
ÇÇ !
(
ÇÇ! "
$str
ÇÇ" M
)
ÇÇM N
;
ÇÇN O
var
ÑÑ 
updatedUser
ÑÑ 
=
ÑÑ 
await
ÖÖ 
_userService
ÖÖ "
.
ÖÖ" #
Update
ÖÖ# )
<
ÖÖ) *
UpdateUserModel
ÖÖ* 9
,
ÖÖ9 :
GetUserModel
ÖÖ; G
,
ÖÖG H
UserValidator
ÖÖI V
>
ÖÖV W
(
ÖÖW X
userToUpdate
ÖÖX d
)
ÖÖd e
;
ÖÖe f
if
áá 
(
áá 
updatedUser
áá 
!=
áá 
null
áá #
)
áá# $
{
àà 
return
ââ 
Ok
ââ 
(
ââ 
updatedUser
ââ %
)
ââ% &
;
ââ& '
}
ää 
return
åå 
Conflict
åå 
(
åå 
$str
åå P
)
ååP Q
;
ååQ R
}
çç 	
[
îî 	

HttpDelete
îî	 
(
îî 
$str
îî  
)
îî  !
]
îî! "
[
ïï 	"
ProducesResponseType
ïï	 
(
ïï 
StatusCodes
ïï )
.
ïï) *
Status200OK
ïï* 5
,
ïï5 6
Type
ïï7 ;
=
ïï< =
typeof
ïï> D
(
ïïD E
string
ïïE K
)
ïïK L
)
ïïL M
]
ïïM N
[
ññ 	"
ProducesResponseType
ññ	 
(
ññ 
StatusCodes
ññ )
.
ññ) *
Status404NotFound
ññ* ;
)
ññ; <
]
ññ< =
public
óó 
async
óó 
Task
óó 
<
óó 
IActionResult
óó '
>
óó' (
Delete
óó) /
(
óó/ 0
int
óó0 3
id
óó4 6
)
óó6 7
{
òò 	
if
ôô 
(
ôô 
id
ôô 
<=
ôô 
$num
ôô 
)
ôô 
return
öö 

BadRequest
öö !
(
öö! "
$"
öö" $
$str
öö$ 5
{
öö5 6
id
öö6 8
}
öö8 9
$str
öö9 ;
"
öö; <
)
öö< =
;
öö= >
var
úú 
response
úú 
=
úú 
await
úú  
_userService
úú! -
.
úú- .
Delete
úú. 4
(
úú4 5
id
úú5 7
)
úú7 8
;
úú8 9
if
ûû 
(
ûû 
response
ûû 
)
ûû 
{
üü 
return
†† 
Ok
†† 
(
†† 
$"
†† 
$str
†† J
{
††J K
id
††K M
}
††M N
$str
††N O
"
††O P
)
††P Q
;
††Q R
}
°° 
return
££ 
NotFound
££ 
(
££ 
$"
££ 
$str
££ ;
{
££; <
id
££< >
}
££> ?
$str
££? A
"
££A B
)
££B C
;
££C D
}
§§ 	
}
•• 
}¶¶ §

UC:\Users\gibre\Projects\Pebolim\Pebolim-Backend\Pebolim.API\Models\CreateUserModel.cs
	namespace 	
Pebolim
 
. 
API 
. 
Models 
{ 
public 

class 
CreateUserModel  
{ 
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public		 
string		 
Username		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
PasswordHash "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
CreateUserModel 
( 
string %
username& .
,. /
string0 6
passwordHash7 C
)C D
{ 	
Username 
= 
username 
;  
PasswordHash 
= 
passwordHash '
;' (
} 	
} 
} ô
RC:\Users\gibre\Projects\Pebolim\Pebolim-Backend\Pebolim.API\Models\GetUserModel.cs
	namespace 	
Pebolim
 
. 
API 
. 
Models 
{ 
public 

class 
GetUserModel 
: 
CreateUserModel  /
{ 
[ 	
Key	 
] 
[		 	
Required			 
]		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
GetUserModel 
( 
int 
id  "
," #
string$ *
username+ 3
,3 4
string5 ;
passwordHash< H
)H I
:J K
baseL P
(P Q
usernameQ Y
,Y Z
passwordHash[ g
)g h
{ 	
Id 
= 
id 
; 
} 	
} 
} ä
UC:\Users\gibre\Projects\Pebolim\Pebolim-Backend\Pebolim.API\Models\UpdateUserModel.cs
	namespace 	
Pebolim
 
. 
API 
. 
Models 
{ 
public 

class 
UpdateUserModel  
:! "
GetUserModel# /
{ 
public 
UpdateUserModel 
( 
int "
id# %
,% &
string' -
username. 6
,6 7
string8 >
passwordHash? K
)K L
:M N
baseO S
(S T
idT V
,V W
usernameX `
,` a
passwordHashb n
)n o
{ 	
} 	
} 
}		 ù)
FC:\Users\gibre\Projects\Pebolim\Pebolim-Backend\Pebolim.API\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
ConfigureServices 
( 
builder 
. 
Services "
)" #
;# $
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
using!! 
(!! 
var!! 

scope!! 
=!! 
app!! 
.!! 
Services!! 
.!!  
CreateScope!!  +
(!!+ ,
)!!, -
)!!- .
using"" 
("" 
var"" 

context"" 
="" 
scope"" 
."" 
ServiceProvider"" *
.""* +

GetService""+ 5
<""5 6
MySqlContext""6 B
>""B C
(""C D
)""D E
)""E F
context## 
?## 
.## 
Database## 
.## 
Migrate## 
(## 
)## 
;##  
app%% 
.%% 
UseHttpsRedirection%% 
(%% 
)%% 
;%% 
app'' 
.'' 
UseAuthorization'' 
('' 
)'' 
;'' 
app)) 
.)) 
MapControllers)) 
()) 
))) 
;)) 
app++ 
.++ 
Run++ 
(++ 
)++ 	
;++	 

void-- 
ConfigureServices-- 
(-- 
IServiceCollection-- )
services--* 2
)--2 3
{.. 
services// 
.// 
	Configure// 
<// 
MySqlConfiguration// )
>//) *
(//* +
builder00 
.00 
Configuration00 
.00 

GetSection00 (
(00( )
$str00) <
)00< =
)00= >
;00> ?
services22 
.22 
AddSingleton22 
(22 
new22 
MapperConfiguration22 1
(221 2
config222 8
=>229 ;
{33 
config44 
.44 

AddProfile44 
<44 
UserMapProfile44 (
>44( )
(44) *
)44* +
;44+ ,
}55 
)55 
.55 
CreateMapper55 
(55 
)55 
)55 
;55 
services77 
.77 
AddDbContext77 
<77 
MySqlContext77 &
>77& '
(77' (
)77( )
;77) *
builder99 
.99 
Services99 
.99 
	AddScoped99 
<99 
IBaseRepository99 .
<99. /
User99/ 3
>993 4
,994 5
BaseRepository996 D
<99D E
User99E I
>99I J
>99J K
(99K L
)99L M
;99M N
builder:: 
.:: 
Services:: 
.:: 
	AddScoped:: 
<:: 
IBaseService:: +
<::+ ,
User::, 0
>::0 1
,::1 2
BaseService::3 >
<::> ?
User::? C
>::C D
>::D E
(::E F
)::F G
;::G H
builder;; 
.;; 
Services;; 
.;; 
	AddScoped;; 
<;; 
IUserRepository;; .
,;;. /
UserRepository;;0 >
>;;> ?
(;;? @
);;@ A
;;;A B
builder<< 
.<< 
Services<< 
.<< 
	AddScoped<< 
<<< 
IUserService<< +
,<<+ ,
UserService<<- 8
><<8 9
(<<9 :
)<<: ;
;<<; <
services>> 
.>> 
AddMvc>> 
(>> 
option>> 
=>>> 
option>> $
.>>$ %!
EnableEndpointRouting>>% :
=>>; <
false>>= B
)>>B C
.?? 	
AddNewtonsoftJson??	 
(?? 
opt?? 
=>?? !
opt??" %
.??% &
SerializerSettings??& 8
.??8 9!
ReferenceLoopHandling??9 N
=??O P!
ReferenceLoopHandling??Q f
.??f g
Ignore??g m
)??m n
;??n o
}@@ 